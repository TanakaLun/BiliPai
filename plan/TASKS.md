# 视频播放优化任务清单

## 任务列表

### 阶段 1: 核心修复 (Critical)

- [ ] **T-01**: 恢复 PlayUrlCache 缓存逻辑
  - 文件: `VideoRepository.kt`
  - 改动: 取消注释 L67-72 的缓存代码
  - 验收: 重复播放同一视频时使用缓存

- [ ] **T-02**: 优化重试延迟策略
  - 文件: `VideoRepository.kt`
  - 改动: 将 `retryDelays` 从 `(0, 200, 500)` 改为 `(0, 100)`
  - 验收: 减少最大等待时间

### 阶段 2: 画质优化 (High)

- [ ] **T-03**: 完善画质降级链
  - 文件: `VideoRepository.kt`
  - 改动: 更新 `QUALITY_CHAIN` 和 `qualityChain` 包含所有画质
  - 验收: 支持从 4K (120) 到 360p (16) 的完整降级

### 阶段 3: 验证 (Verification)

- [ ] **T-04**: 构建验证
  - 执行: `./gradlew assembleDebug`
  - 验收: 构建成功，无编译错误

- [ ] **T-05**: 功能验证 (手动)
  - 测试首次加载速度
  - 测试缓存命中
  - 测试清晰度切换

---

## 进度追踪

| 任务 | 状态 | 完成时间 |
|------|------|----------|
| T-01 | ✅ 已完成 | 2025-12-09 |
| T-02 | ✅ 已完成 | 2025-12-09 |
| T-03 | ✅ 已完成 | 2025-12-09 |
| T-04 | ✅ 已完成 | 2025-12-09 |
| T-05 | ⏳ 待开始 | - |
